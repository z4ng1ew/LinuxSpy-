#!/usr/bin/env bash

 ## üìë –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. **–ë–õ–û–ö: –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ò –ö–û–ù–°–¢–ê–ù–¢–´** (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –î–µ—Ñ–æ–ª—Ç—ã)
2. **–ë–õ–û–ö: –õ–û–ì–ò–ö–ê –¶–í–ï–¢–û–í** (–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ "–ß–µ–ª–æ–≤–µ–∫ -> –¢–µ—Ä–º–∏–Ω–∞–ª")
3. **–ë–õ–û–ö: –ó–ê–ì–†–£–ó–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò** (–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫)
4. **–ë–õ–û–ö: –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô** (–ù–∞–ª–∏—á–∏–µ —É—Ç–∏–ª–∏—Ç)
5. **–ë–õ–û–ö: –°–ë–û–† –°–ò–°–¢–ï–ú–ù–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ò** (–û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞)
6. **–ë–õ–û–ö: –û–¢–ß–ï–¢ –û –¶–í–ï–¢–û–í–û–ô –°–•–ï–ú–ï** (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –≤—ã–≤–æ–¥)
7. **–ë–õ–û–ö: –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø** (–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞)





# 1. === –ë–õ–û–ö: –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ò –ö–û–ù–°–¢–ê–ù–¢–´ ===
# –¶–µ–ª—å: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å "–≥–∏–≥–∏–µ–Ω—É" —Å–∫—Ä–∏–ø—Ç–∞, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∑–∞–¥–∞—Ç—å –∑–∞–ø–∞—Å–Ω—ã–µ —Ü–≤–µ—Ç–∞ (–¥–µ—Ñ–æ–ª—Ç—ã), –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ—Ç—Å—è.

set -euo pipefail

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –æ–ø—Ü–∏–π 'set' (–†–µ–∂–∏–º —Å—Ç—Ä–æ–≥–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏):
# -e (Exit on error): –ü–∞–¥–∞—Ç—å –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ. –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—É–ª–∞ –Ω–µ 0 ‚Äî —Å—Ç–æ–ø.
# -u (Unset variables): –ü–∞–¥–∞—Ç—å, –µ—Å–ª–∏ –ø—ã—Ç–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Å—Ç—É—é (–Ω–µ –æ–±—ä—è–≤–ª–µ–Ω–Ω—É—é) –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–µ—á–∞—Ç–æ–∫.
# -o pipefail: –ï—Å–ª–∏ –≤ —Ü–µ–ø–æ—á–∫–µ `cmd1 | cmd2` —É–ø–∞–ª–∞ –ø–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞, —Å—á–∏—Ç–∞—Ç—å –æ—à–∏–±–∫–æ–π –≤–µ—Å—å –∫–æ–Ω–≤–µ–π–µ—Ä.

trap 'echo -e "\n\n–ü—Ä–µ—Ä–≤–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º."; exit 130' INT TERM
# trap ‚Äî "–õ–æ–≤—É—à–∫–∞" –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤.
# INT (Ctrl+C) –∏ TERM (–∫–æ–º–∞–Ω–¥–∞ kill) ‚Äî —ç—Ç–æ —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–æ—Å—å–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è.
# exit 130 ‚Äî –°—Ç–∞–Ω–¥–∞—Ä—Ç Linux (128 + –Ω–æ–º–µ—Ä —Å–∏–≥–Ω–∞–ª–∞ 2 = 130). –ú—ã –≥–æ–≤–æ—Ä–∏–º —Å–∏—Å—Ç–µ–º–µ: "–ú–µ–Ω—è —É–±–∏–ª–∏, —è –Ω–µ —Å–∞–º —É–ø–∞–ª".

CONFIG_FILE="config.conf" # –ò–º—è —Ñ–∞–π–ª–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

# –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Fallback values).
# –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ config.conf –Ω–µ—Ç –∏–ª–∏ –æ–Ω –ø—É—Å—Ç–æ–π, —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ —Ü–≤–µ—Ç–∞.
# –ö–æ–¥–∏—Ä–æ–≤–∫–∞ (1-6): 1=White, 2=Red, 3=Green, 4=Blue, 5=Purple, 6=Black.
DEFAULT_COLUMN1_BG=6 # –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω (—Å–ª–µ–≤–∞)
DEFAULT_COLUMN1_FG=1 # –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç (—Å–ª–µ–≤–∞)
DEFAULT_COLUMN2_BG=2 # –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω (—Å–ø—Ä–∞–≤–∞)
DEFAULT_COLUMN2_FG=4 # –°–∏–Ω–∏–π —Ç–µ–∫—Å—Ç (—Å–ø—Ä–∞–≤–∞)


# 2. === –ë–õ–û–ö: –õ–û–ì–ò–ö–ê –¶–í–ï–¢–û–í (get_color & get_color_name) ===
# –¶–µ–ª—å: 
# 1. get_color: –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Ü–∏—Ñ—Ä—É (1-6) –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π ANSI-–∫–æ–¥ (41, 32 –∏ —Ç.–¥.).
# 2. get_color_name: –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Ü–∏—Ñ—Ä—É –≤ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞ (–¥–ª—è –æ—Ç—á–µ—Ç–∞ –≤ –∫–æ–Ω—Ü–µ).

get_color() {
    local color_num=$1      # –ê—Ä–≥—É–º–µ–Ω—Ç 1: –ù–æ–º–µ—Ä —Ü–≤–µ—Ç–∞ (–æ—Ç 1 –¥–æ 6)
    local is_background=$2  # –ê—Ä–≥—É–º–µ–Ω—Ç 2: –§–ª–∞–≥-–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å (1 = —ç—Ç–æ –§–û–ù, 0 = —ç—Ç–æ –¢–ï–ö–°–¢)
    
    # case ‚Äî —ç—Ç–æ "–°–ª–æ–≤–∞—Ä—å". –ú—ã —Å–º–æ—Ç—Ä–∏–º –Ω–∞ color_num –∏ —Ä–µ—à–∞–µ–º, –∫–∞–∫–æ–π –∫–æ–¥ –æ—Ç–¥–∞—Ç—å.
    case $color_num in
        1) # White
            # –¢–µ—Ä–Ω–∞—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞: [[ —É—Å–ª–æ–≤–∏–µ ]] && –¢–û–ì–î–ê || –ò–ù–ê–ß–ï
            # –ï—Å–ª–∏ –ø—Ä–æ—Å–∏–ª–∏ —Ñ–æ–Ω ($is_background == 1) -> –∫–æ–¥ 47 (–±–µ–ª—ã–π —Ñ–æ–Ω).
            # –ò–Ω–∞—á–µ (–ø—Ä–æ—Å–∏–ª–∏ —Ç–µ–∫—Å—Ç) -> –∫–æ–¥ 97 (—è—Ä–∫–∏–π –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç).
            [[ $is_background -eq 1 ]] && echo "47" || echo "97"
            ;;
        2) # Red
            [[ $is_background -eq 1 ]] && echo "41" || echo "31"
            ;;
        3) # Green
            [[ $is_background -eq 1 ]] && echo "42" || echo "32"
            ;;
        4) # Blue
            [[ $is_background -eq 1 ]] && echo "44" || echo "34"
            ;;
        5) # Purple
            [[ $is_background -eq 1 ]] && echo "45" || echo "35"
            ;;
        6) # Black
            [[ $is_background -eq 1 ]] && echo "40" || echo "30"
            ;;
        *) # –ï—Å–ª–∏ –ø—Ä–∏—à–ª–æ —á—Ç–æ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ (–Ω–µ 1-6)
            echo ""
            ;;
    esac
}



get_color_name() {
    # –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ –¥–ª—è –ª—é–¥–µ–π.
    # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Å–∫—Ä–∏–ø—Ç–∞, —á—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å: "–í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Red", –∞ –Ω–µ "–í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ 2".
    case $1 in
        1) echo "white" ;;
        2) echo "red" ;;
        3) echo "green" ;;
        4) echo "blue" ;;
        5) echo "purple" ;;
        6) echo "black" ;;
        *) echo "unknown" ;;
    esac
}


# 3. === –ë–õ–û–ö: –ó–ê–ì–†–£–ó–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò (load_config) ===
# –¶–µ–ª—å: –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª config.conf, –ø–æ—á–∏—Å—Ç–∏—Ç—å –º—É—Å–æ—Ä, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–∏—Ñ—Ä—ã –∏ –≤–µ—Ä–Ω—É—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
# –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Äî –≤–µ—Ä–Ω—É—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

load_config() {
    # 1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ (–∏–∑ –Ω–∞—á–∞–ª–∞ —Å–∫—Ä–∏–ø—Ç–∞).
    # –≠—Ç–æ –Ω–∞—à–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç—Å—è, –º—ã –æ—Å—Ç–∞–Ω–µ–º—Å—è —Å —ç—Ç–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
    local col1_bg=$DEFAULT_COLUMN1_BG
    local col1_fg=$DEFAULT_COLUMN1_FG
    local col2_bg=$DEFAULT_COLUMN2_BG
    local col2_fg=$DEFAULT_COLUMN2_FG
    
    # –§–ª–∞–≥–∏ "–≠—Ç–æ –¥–µ—Ñ–æ–ª—Ç?". 
    # 1 = –î–∞ (True), 0 = –ù–µ—Ç (False).
    # –ù—É–∂–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞, —á—Ç–æ–±—ã —Å–∫–∞–∑–∞—Ç—å —é–∑–µ—Ä—É: "–¢—É—Ç –º—ã –≤–∑—è–ª–∏ —Ç–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∞ —Ç—É—Ç ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ".
    local col1_bg_is_default=1
    local col1_fg_is_default=1
    local col2_bg_is_default=1
    local col2_fg_is_default=1
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª (-f)
    if [[ -f "$CONFIG_FILE" ]]; then
        
        # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –ø–æ—Å—Ç—Ä–æ—á–Ω–æ.
        # IFS='=' ‚Äî (Internal Field Separator) –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π. –ú—ã –≥–æ–≤–æ—Ä–∏–º: "–†–∞–∑–±–∏–≤–∞–π —Å—Ç—Ä–æ–∫—É —Ç–∞–º, –≥–¥–µ —Å—Ç–æ–∏—Ç –∑–Ω–∞–∫ —Ä–∞–≤–Ω–æ".
        # read -r key value ‚Äî –ß–∏—Ç–∞–µ–º: —Ç–æ, —á—Ç–æ —Å–ª–µ–≤–∞ –æ—Ç —Ä–∞–≤–Ω–æ ‚Äî –≤ key, —Ç–æ, —á—Ç–æ —Å–ø—Ä–∞–≤–∞ ‚Äî –≤ value.
        while IFS='=' read -r key value; do
            
            # –ü—Ä–æ–ø—É—Å–∫ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.
            # [[ -z "$key" ]] ‚Äî –µ—Å–ª–∏ –∫–ª—é—á –ø—É—Å—Ç–æ–π.
            # || ‚Äî –ò–õ–ò
            # "$key" =~ ^[[:space:]]*# ‚Äî Regex: –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Ä–µ—à–µ—Ç–∫–∏ # (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π).
            [[ -z "$key" || "$key" =~ ^[[:space:]]*# ]] && continue
            
            # –ß–∏—Å—Ç–∫–∞ –º—É—Å–æ—Ä–∞ (tr -d '[:space:]').
            # tr (—Å–æ–∫—Ä. –æ—Ç translate) ‚Äî —ç—Ç–æ –º–æ—â–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ Linux –¥–ª—è –∑–∞–º–µ–Ω—ã –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞.
            # -d (delete): –≠—Ç–∞ –æ–ø—Ü–∏—è –≥–æ–≤–æ—Ä–∏—Ç —É—Ç–∏–ª–∏—Ç–µ: ¬´–ù–µ –∑–∞–º–µ–Ω—è–π —Å–∏–º–≤–æ–ª—ã, –∞ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–π –∏—Ö –∏–∑ –ø–æ—Ç–æ–∫–∞ —Ç–µ–∫—Å—Ç–∞¬ª.
            # –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—Ä–æ–±–µ–ª—ã, —Ç–∞–±—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –∏–∑ –∫–ª—é—á–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è.
            # –ß—Ç–æ–±—ã " column1_background " –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–æ—Å—å –≤ "column1_background".
            key=$(echo "$key" | tr -d '[:space:]')   # –ö–æ–º–∞–Ω–¥–∞ value=$(echo "$value" | tr -d '[:space:]') –≤—ã—Ä–µ–∑–∞–µ—Ç –≤—Å—ë –ª–∏—à–Ω–µ–µ.
            value=$(echo "$value" | tr -d '[:space:]')
            
            # –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è (–§–µ–π—Å–∫–æ–Ω—Ç—Ä–æ–ª—å).
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–æ–≤–Ω–æ –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞ –æ—Ç 1 –¥–æ 6.
            if [[ "$value" =~ ^[1-6]$ ]]; then  # –ó–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π $value (—Ç–æ–≥–æ, —á—Ç–æ —Å—Ç–æ—è–ª–æ —Å–ø—Ä–∞–≤–∞ –æ—Ç –∑–Ω–∞–∫–∞ = –≤ —Ñ–∞–π–ª–µ).
                case "$key" in  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π key
                    column1_background)
                        col1_bg=$value          # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                        col1_bg_is_default=0    # –û–ø—É—Å–∫–∞–µ–º —Ñ–ª–∞–≥ –¥–µ—Ñ–æ–ª—Ç–∞ (—Ç–µ–ø–µ—Ä—å —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —é–∑–µ—Ä–∞)
                        ;;
                    column1_font_color)
                        col1_fg=$value          # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —Ü–∏—Ñ—Ä—É –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é    
                        col1_fg_is_default=0    # –°—Ç–∞–≤–∏–º –æ—Ç–º–µ—Ç–∫—É: "–≠—Ç–æ –ù–ï —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –≤—ã–±–æ—Ä —é–∑–µ—Ä–∞"
                        ;;
                    column2_background)
                        col2_bg=$value
                        col2_bg_is_default=0
                        ;;
                    column2_font_color)
                        col2_fg=$value
                        col2_fg_is_default=0
                        ;;
                esac
            fi
        done < "$CONFIG_FILE" # –ù–∞–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä—å —Ü–∏–∫–ª–∞ # –í Bash –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è while ... done ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –±–ª–æ–∫ (–∫–∞–∫ –æ–¥–Ω–∞ –±–æ–ª—å—à–∞—è –º–∞—à–∏–Ω–∞). –ö–æ–≥–¥–∞ —Ç—ã –ø–∏—à–µ—à—å < "$CONFIG_FILE" –ø–æ—Å–ª–µ done, —Ç—ã –ø–æ–¥–∫–ª—é—á–∞–µ—à—å —Ñ–∞–π–ª –Ω–µ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–æ—á–∫–µ, –∞ –∫–æ –≤—Å–µ–º—É –±–ª–æ–∫—É —Ü–µ–ª–∏–∫–æ–º.
        # –í Bash —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –Ω–µ–ª—å–∑—è –Ω–∞–ø–∏—Å–∞—Ç—å < file while..., –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä —Å–Ω–∞—á–∞–ª–∞ –¥–æ–ª–∂–µ–Ω –ø–æ–Ω—è—Ç—å, –∫–∞–∫—É—é ¬´–º–∞—à–∏–Ω—É¬ª –æ–Ω –±—É–¥–µ—Ç –∑–∞–ø–∏—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–º–∏. –ü–æ—ç—Ç–æ–º—É —Å–Ω–∞—á–∞–ª–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è ¬´–º–∞—à–∏–Ω–∞¬ª (while...do...done), –∞ –≤ –∫–æ–Ω—Ü–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è¬ª (< file).
    fi
    


# ### 2. –ö–∞–∫ —ç—Ç–æ –≤–∏–¥–∏—Ç Bash (–ø–æ—à–∞–≥–æ–≤–æ)

# –ö–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —ç—Ç–æ–π —á–∞—Å—Ç–∏:

# 1. –û–Ω –≤–∏–¥–∏—Ç —Å–ª–æ–≤–æ `while`. –ê–≥–∞, –±—É–¥–µ—Ç —Ü–∏–∫–ª.
# 2. –û–Ω –¥–æ—Ö–æ–¥–∏—Ç –¥–æ `done` –∏ –≤–∏–¥–∏—Ç `< "$CONFIG_FILE"`.
# 3. **–í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç** –æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –∏ ¬´–ø—Ä–∏–∫–ª–µ–∏–≤–∞–µ—Ç¬ª –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –≤–≤–æ–¥—É (stdin) —ç—Ç–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ü–∏–∫–ª–∞.
# 4. –¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞ `read`, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–æ–∏—Ç –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ (`while read...`), –Ω–∞—á–∏–Ω–∞–µ—Ç ¬´–≤—Å–∞—Å—ã–≤–∞—Ç—å¬ª —Å—Ç—Ä–æ–∫–∏ –∏–∑ —ç—Ç–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.








    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "—Å–ª–µ–ø–æ—Ç—É" (–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ—Å–ª–µ —á—Ç–µ–Ω–∏—è).
    # –ï—Å–ª–∏ —Ñ–æ–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–∫—Å—Ç–æ–º ‚Äî –≤—ã—Ö–æ–¥–∏–º —Å –æ—à–∏–±–∫–æ–π, –∏–Ω–∞—á–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å.
    if [[ $col1_bg -eq $col1_fg ]]; then
        echo "–û—à–∏–±–∫–∞: —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –∏ —Ü–≤–µ—Ç —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å." >&2 # >&2 ‚Äî –ø–∏—à–µ–º –≤ –ø–æ—Ç–æ–∫ –æ—à–∏–±–æ–∫
        exit 1
    fi
    
    if [[ $col2_bg -eq $col2_fg ]]; then
        echo "–û—à–∏–±–∫–∞: —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ –∏ —Ü–≤–µ—Ç —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å." >&2
        exit 1
    fi
    
    # –§–ò–ù–ê–õ–¨–ù–´–ô –ê–ö–ö–û–†–î –§–£–ù–ö–¶–ò–ò
    # Bash-—Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ —É–º–µ—é—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–∞—Å—Å–∏–≤—ã –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö "–Ω–∞—Ä—É–∂—É" –æ–±—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º.
    # –ü–æ—ç—Ç–æ–º—É –º—ã –ø—Ä–æ—Å—Ç–æ –ü–ï–ß–ê–¢–ê–ï–ú (echo) –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª.
    # –í main() –º—ã –ø–æ–π–º–∞–µ–º —ç—Ç—É —Å—Ç—Ä–æ–∫—É –∏ —Ä–∞–∑—Ä–µ–∂–µ–º –µ—ë –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
    echo "$col1_bg $col1_fg $col2_bg $col2_fg $col1_bg_is_default $col1_fg_is_default $col2_bg_is_default $col2_fg_is_default"
    # –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ ‚Äî ¬´–ø–æ—Å—ã–ª–∫–∞¬ª, –∫–æ—Ç–æ—Ä—É—é —Ñ—É–Ω–∫—Ü–∏—è load_config –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –≥–ª–∞–≤–Ω—É—é —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞ (main). –í Bash —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–∞—Å—Å–∏–≤—ã –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ return, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—á–∞—Ç–∞—é—Ç –≤—Å—ë –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª, –∞ –≤—ã–∑—ã–≤–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —ç—Ç—É —Å—Ç—Ä–æ–∫—É ¬´–ª–æ–≤–∏—Ç¬ª.
    # –í —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞. –î–∞–≤–∞–π —Ä–∞–∑–¥–µ–ª–∏–º –∏—Ö –Ω–∞ –¥–≤–µ –≥—Ä—É–ø–ø—ã.



### –ì—Ä—É–ø–ø–∞ 1: –ö–æ–¥—ã —Ü–≤–µ—Ç–æ–≤ (–ø–µ—Ä–≤—ã–µ 4 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

# –ó–¥–µ—Å—å –ª–µ–∂–∞—Ç —Ü–∏—Ñ—Ä—ã –æ—Ç **1 –¥–æ 6**. –≠—Ç–∏ —Ü–∏—Ñ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞ —Å —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

# | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ß—Ç–æ —ç—Ç–æ | –ó–Ω–∞—á–µ–Ω–∏–µ |
# | --- | --- | --- |
# | **`col1_bg`** | –§–æ–Ω –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ (–Ω–∞–∑–≤–∞–Ω–∏—è) | –¶–∏—Ñ—Ä–∞ 1-6 |
# | **`col1_fg`** | –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ | –¶–∏—Ñ—Ä–∞ 1-6 |
# | **`col2_bg`** | –§–æ–Ω –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ (–∑–Ω–∞—á–µ–Ω–∏—è) | –¶–∏—Ñ—Ä–∞ 1-6 |
# | **`col2_fg`** | –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ | –¶–∏—Ñ—Ä–∞ 1-6 |

---

# ### –ì—Ä—É–ø–ø–∞ 2: –§–ª–∞–≥–∏-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

# –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ ¬´–º–µ—Ç–∫–∏¬ª, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ **0** –∏–ª–∏ **1**. –û–Ω–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Å–∫—Ä–∏–ø—Ç –º–æ–≥ —á–µ—Å—Ç–Ω–æ –æ—Ç—á–∏—Ç–∞—Ç—å—Å—è: ¬´—ç—Ç—É –Ω–∞—Å—Ç—Ä–æ–π–∫—É —è –≤–∑—è–ª –∏–∑ —Ç–≤–æ–µ–≥–æ —Ñ–∞–π–ª–∞, –∞ –≤–æ—Ç —ç—Ç—É ‚Äî –∏–∑ —Å–≤–æ–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∑–∞–ø–∞—Å–æ–≤¬ª.

# * **`0`**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞ `config.conf` (—ç—Ç–æ –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
# * **`1`**: –í —Ñ–∞–π–ª–µ —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –±—ã–ª–æ (–∏–ª–∏ —Ç–∞–º –±—ã–ª–∞ –æ—à–∏–±–∫–∞), –ø–æ—ç—Ç–æ–º—É —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∑–Ω–∞—á–µ–Ω–∏–µ ¬´–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª (default).

# | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç |
# | --- | --- |
# | **`col1_bg_is_default`** | –ë—ã–ª –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ñ–æ–Ω –¥–ª—è 1-–π –∫–æ–ª–æ–Ω–∫–∏? |
# | **`col1_fg_is_default`** | –ë—ã–ª –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è 1-–π –∫–æ–ª–æ–Ω–∫–∏? |
# | **`col2_bg_is_default`** | ... –¥–ª—è —Ñ–æ–Ω–∞ 2-–π –∫–æ–ª–æ–Ω–∫–∏? |
# | **`col2_fg_is_default`** | ... –¥–ª—è —à—Ä–∏—Ñ—Ç–∞ 2-–π –∫–æ–ª–æ–Ω–∫–∏? |

---

# ### –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç ¬´–≤ –∂–∏–≤—É—é¬ª?

# –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –≤ `config.conf` —Ç—ã —É–∫–∞–∑–∞–ª —Ç–æ–ª—å–∫–æ —Ñ–æ–Ω –ø–µ—Ä–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `3` ‚Äî –∑–µ–ª–µ–Ω—ã–π), –∞ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª.
# –§—É–Ω–∫—Ü–∏—è `echo` –≤–Ω—É—Ç—Ä–∏ `load_config` –≤—ã–¥–∞—Å—Ç –≤–æ—Ç —Ç–∞–∫—É—é —Å—Ç—Ä–æ–∫—É:

# > `3 1 2 4 0 1 1 1`

# **–ö–∞–∫ —ç—Ç–æ —Ä–∞—Å—à–∏—Ñ—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç:**

# 1. **3**: –§–æ–Ω 1-–π –∫–æ–ª–æ–Ω–∫–∏ ‚Äî –∑–µ–ª–µ–Ω—ã–π.
# 2. **1, 2, 4**: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –≤–∑—è—Ç—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ.
# 3. **0**: –ü–µ—Ä–≤—ã–π —Ñ–ª–∞–≥ (—Ñ–æ–Ω 1-–π –∫–æ–ª–æ–Ω–∫–∏) —Ä–∞–≤–µ–Ω 0. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: ¬´–í–∑—è—Ç–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞¬ª.
# 4. **1, 1, 1**: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ —Ä–∞–≤–Ω—ã 1. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: ¬´–í–∑—è—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª.

---

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ —Ñ—É–Ω–∫—Ü–∏–∏ `main`?

# –í —Ñ—É–Ω–∫—Ü–∏–∏ `main` –µ—Å—Ç—å –≤–æ—Ç —Ç–∞–∫–∞—è —Å—Ç—Ä–æ–∫–∞-–ø—Ä–∏–µ–º–Ω–∏–∫:
# `read -r col1_bg col1_fg ... < <(load_config)`

# –û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ ¬´—Å–æ—Ä—Ç–∏—Ä–æ–≤—â–∏–∫ –ø–æ—Å—ã–ª–æ–∫¬ª:

# 1. –ó–∞–ø—É—Å–∫–∞–µ—Ç `load_config`.
# 2. –í–∏–¥–∏—Ç —Å—Ç—Ä–æ–∫—É `3 1 2 4 0 1 1 1`.
# 3. –†–∞–∑—Ä–µ–∑–∞–µ—Ç –µ—ë –ø–æ –ø—Ä–æ–±–µ–ª–∞–º.
# 4. –†–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ —á–∏—Å–ª–æ –≤ —Å–≤–æ—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–∞–ª—å—à–µ –¥–ª—è —Ä–∞—Å–∫—Ä–∞—Å–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∏ –≤—ã–≤–æ–¥–∞ –æ—Ç—á–µ—Ç–∞.

}




# 4. === –ë–õ–û–ö: –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô ===
# –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –Ω—É–∂–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∏–Ω–∞—Ç—å.

check_dependencies() {
    local missing=() # –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
    
    # –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤–∞–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
    for cmd in ip awk free df date hostname; do
        # command -v: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–Ω–∞–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—É—Ç—å –∫ –ø—Ä–æ–≥—Ä–∞–º–º–µ.
        # &>/dev/null: –î–µ–ª–∞–µ–º —ç—Ç–æ –º–æ–ª—á–∞ (–≤ "—á–µ—Ä–Ω—É—é –¥—ã—Ä—É").
        # || (–ò–õ–ò): –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –ù–ï –Ω–∞–π–¥–µ–Ω–∞ (–æ—à–∏–±–∫–∞), –≤—ã–ø–æ–ª–Ω—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤.
        command -v "$cmd" &>/dev/null || missing+=("$cmd")
    done
    
    # ${#missing[@]}: –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ.
    if [[ ${#missing[@]} -gt 0 ]]; then
        echo "–û—à–∏–±–∫–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–æ–º–∞–Ω–¥—ã: ${missing[*]}" >&2
        exit 1
    fi
}


# 5. === –ë–õ–û–ö: –°–ë–û–† –°–ò–°–¢–ï–ú–ù–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ò (gather_system_facts) ===
# –¶–µ–ª—å: –°–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, —Ä–∞—Å–∫—Ä–∞—Å–∏—Ç—å –∏—Ö –∏ –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω.

gather_system_facts() {
    # –û—Ç–∫–ª—é—á–∞–µ–º —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (-e), –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–µ—Ç–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º –º–æ–≥—É—Ç —Å–±–æ–∏—Ç—å,
    # –∏ –º—ã —Ö–æ—Ç–∏–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —ç—Ç–æ –º—è–≥–∫–æ (–≤—ã–≤–µ—Å—Ç–∏ N/A), –∞ –Ω–µ –ø–∞–¥–∞—Ç—å.
    set +e
    
    # –ü—Ä–∏–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –°—é–¥–∞ –ø—Ä–∏–ª–µ—Ç–µ–ª–∏ —Ü–∏—Ñ—Ä—ã (1-6) –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ main.
    local bg_name=$1
    local fg_name=$2
    local bg_value=$3
    local fg_value=$4
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: –¶–∏—Ñ—Ä—ã (1-6) -> ANSI-–∫–æ–¥—ã (41, 32...).
    local color_bg_name color_fg_name color_bg_value color_fg_value
    color_bg_name=$(get_color "$bg_name" 1)   # –§–ª–∞–≥ 1 = –Ω—É–∂–µ–Ω —Ñ–æ–Ω
    color_fg_name=$(get_color "$fg_name" 0)   # –§–ª–∞–≥ 0 = –Ω—É–∂–µ–Ω —à—Ä–∏—Ñ—Ç
    color_bg_value=$(get_color "$bg_value" 1)
    color_fg_value=$(get_color "$fg_value" 0)
    
    # –°–±–æ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π.
    # \033[ ‚Äî ESCAPE-—Å–∏–º–≤–æ–ª (–Ω–∞—á–∞–ª–æ –∫–æ–º–∞–Ω–¥—ã —Ç–µ—Ä–º–∏–Ω–∞–ª—É).
    # ...m ‚Äî –∫–æ–Ω–µ—Ü –∫–æ–º–∞–Ω–¥—ã.
    # ; ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –∫–æ–¥–æ–≤.
    local reset="\033[0m" # –°–±—Ä–æ—Å —Ü–≤–µ—Ç–∞ –≤ –¥–µ—Ñ–æ–ª—Ç
    local name_style="\033[${color_bg_name};${color_fg_name}m"   # –°—Ç–∏–ª—å –¥–ª—è –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ (–ù–∞–∑–≤–∞–Ω–∏—è)
    local value_style="\033[${color_bg_value};${color_fg_value}m" # –°—Ç–∏–ª—å –¥–ª—è –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ (–ó–Ω–∞—á–µ–Ω–∏—è)

    # --- –°–ë–û–† –î–ê–ù–ù–´–• ---

    # Hostname (–ò–º—è —É–∑–ª–∞)
    # || hostname: –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ —Ñ–ª–∞–≥ -s –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.
    # || echo "Unknown": –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä—É–±–µ–∂ –æ–±–æ—Ä–æ–Ω—ã.
    local node_name
    node_name=$(hostname -s 2>/dev/null || hostname 2>/dev/null || echo "Unknown")

    # Timezone (–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å)
    local tz_name tz_offset
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ timedatectl (–¥–ª—è systemd —Å–∏—Å—Ç–µ–º)
    if command -v timedatectl &>/dev/null && timedatectl status &>/dev/null; then
        tz_name=$(timedatectl show --value --property=Timezone 2>/dev/null)
        [[ -z "$tz_name" ]] && tz_name="UTC" # –ï—Å–ª–∏ –ø—É—Å—Ç–æ, —Å—Ç–∞–≤–∏–º UTC
        # –ú–∞–≥–∏—è sed: –≤—ã—Ä–µ–∑–∞–µ–º —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –µ–≥–æ.
        tz_offset=$(date +"%:::z" 2>/dev/null || date +"%z" | sed 's/\([+-][0-9][0-9]\).*/\1/' | sed 's/0\([0-9]\)/\1/')
    else
        tz_name="UTC"
        tz_offset="0"
    fi

    # User (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
    local active_user
    active_user=$(whoami)

    # OS Release (–í–µ—Ä—Å–∏—è –û–°)
    local os_release
    # –ü—ã—Ç–∞–µ–º—Å—è —Ä–∞–∑–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏: hostnamectl -> lsb_release -> uname
    if command -v hostnamectl &>/dev/null && hostnamectl status &>/dev/null; then
        # awk -F': ': –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ‚Äî –¥–≤–æ–µ—Ç–æ—á–∏–µ —Å –ø—Ä–æ–±–µ–ª–æ–º. –ò—â–µ–º —Å—Ç—Ä–æ–∫—É "Operating System", –±–µ—Ä–µ–º 2-—é –∫–æ–ª–æ–Ω–∫—É.
        os_release=$(hostnamectl | awk -F': ' '/Operating System/ {print $2; exit}')
        # –û–ø—Ü–∏—è -F –≤ –∫–æ–º–∞–Ω–¥–µ awk ‚Äî —ç—Ç–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—Ç Field Separator (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π).
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é awk —Å—á–∏—Ç–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ —Ç–∞–±—É–ª—è—Ü–∏—é. –ï—Å–ª–∏ —Ç–≤–æ—è —Å—Ç—Ä–æ–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: –æ–¥–∏–Ω –¥–≤–∞ —Ç—Ä–∏, —Ç–æ awk –ø–æ–π–º–µ—Ç, —á—Ç–æ $1 ‚Äî —ç—Ç–æ ¬´–æ–¥–∏–Ω¬ª, –∞ $2 ‚Äî —ç—Ç–æ ¬´–¥–≤–∞¬ª.
# –ù–æ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã —á–µ–º-—Ç–æ –¥—Ä—É–≥–∏–º (–¥–≤–æ–µ—Ç–æ—á–∏–µ–º, –∑–∞–ø—è—Ç–æ–π, —Ç–æ—á–∫–æ–π), awk ¬´—Å–∫–ª–µ–∏—Ç¬ª –≤—Å—ë –≤ –æ–¥–Ω–æ –ø–æ–ª–µ. –í–æ—Ç —Ç—É—Ç –∏ –Ω—É–∂–Ω–∞ –æ–ø—Ü–∏—è -F, —á—Ç–æ–±—ã —Å–∫–∞–∑–∞—Ç—å: ¬´–≠–π, –¥–µ–ª–∏ —Å—Ç—Ä–æ–∫—É –≤–æ—Ç –ø–æ —ç—Ç–æ–º—É —Å–∏–º–≤–æ–ª—É!¬ª.

    elif command -v lsb_release &>/dev/null; then
        os_release=$(lsb_release -d 2>/dev/null | cut -f2)
    else
        os_release=$(uname -s 2>/dev/null || echo "Unknown")
    fi

    # Date (–î–∞—Ç–∞)
    # LC_TIME=C: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç POSIX), —á—Ç–æ–±—ã –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —è–∑—ã–∫–∞ —Å–∏—Å—Ç–µ–º—ã.
    local current_moment
    current_moment=$(LC_TIME=C date +"%d %b %Y %H:%M:%S" | sed 's/^0//') # sed —É–±–∏—Ä–∞–µ—Ç –Ω–æ–ª—å –≤ –Ω–∞—á–∞–ª–µ (05 –¥–µ–∫ -> 5 –¥–µ–∫)

    # Uptime (–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã)
    local uptime_human uptime_seconds
    if [[ -f /proc/uptime ]]; then
        # –ß–∏—Ç–∞–µ–º /proc/uptime (—Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª —è–¥—Ä–∞). –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ (—Å–µ–∫—É–Ω–¥—ã).
        uptime_seconds=$(awk '{printf "%.0f", $1}' /proc/uptime 2>/dev/null || echo "0")
        
        # –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (Bash —É–º–µ–µ—Ç —Å—á–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞)
        local days hours mins
        days=$((uptime_seconds / 86400)) # –°–µ–∫—É–Ω–¥ –≤ –¥–Ω–µ
        hours=$(((uptime_seconds % 86400) / 3600)) # –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–Ω–µ–π –¥–µ–ª–∏–º –Ω–∞ —á–∞—Å—ã
        mins=$(((uptime_seconds % 3600) / 60))    # –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç —á–∞—Å–æ–≤ –¥–µ–ª–∏–º –Ω–∞ –º–∏–Ω—É—Ç—ã
        
        # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∞—Å–∏–≤–æ–π —Å—Ç—Ä–æ–∫–∏ ("1 day, 2 hours...")
        uptime_human=""
        if [[ $days -gt 0 ]]; then
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ (1 day vs 5 days)
            [[ $days -eq 1 ]] && uptime_human="${days} day" || uptime_human="${days} days"
            uptime_human+=", "
        fi
        [[ $hours -eq 1 ]] && uptime_human+="${hours} hour" || uptime_human+="${hours} hours"
        uptime_human+=", "
        [[ $mins -eq 1 ]] && uptime_human+="${mins} minute" || uptime_human+="${mins} minutes"
    else
        uptime_seconds="N/A"
        uptime_human="N/A"
    fi

    # Network (–°–µ—Ç—å)
    local main_iface
    # ip route get 8.8.8.8: –°–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–∏—Å—Ç–µ–º—É: "–ß–µ—Ä–µ–∑ –∫–∞–∫—É—é –∫–∞—Ä—Ç—É —Ç—ã –ø–æ–π–¥–µ—à—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (–∫ Google DNS)?".
    # awk '{print $5}': –ë–µ—Ä–µ–º –∏–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏–∑ –≤—ã–≤–æ–¥–∞.
    main_iface=$(ip route get 8.8.8.8 2>/dev/null | awk '{print $5; exit}' || echo "eth0")

    local machine_ip subnet_mask default_gateway
    # ip -4 addr show: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ IPv4 –¥–ª—è –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
    machine_ip=$(ip -4 addr show dev "$main_iface" 2>/dev/null | awk '/inet/ {print $2; exit}' | cut -d'/' -f1)
    [[ -z "$machine_ip" ]] && machine_ip="N/A"

    # –ú–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏ (–°–ª–æ–∂–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤ AWK)
    local cidr_prefix
    # CIDR ‚Äî —ç—Ç–æ —á–∏—Å–ª–æ –ø–æ—Å–ª–µ —Å–ª–µ—à–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, /24).
    cidr_prefix=$(ip -4 addr show dev "$main_iface" 2>/dev/null | awk '/inet/ {print $2; exit}' | cut -d'/' -f2)
    
    if [[ -n "$cidr_prefix" ]]; then
        # -v prefix="$cidr_prefix": –ü–µ—Ä–µ–¥–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏–∑ Bash –≤–Ω—É—Ç—Ä—å AWK.
        subnet_mask=$(awk -v prefix="$cidr_prefix" 'BEGIN {
            # –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É—Ä–∞–∫–∞
            if (prefix == "" || prefix < 0 || prefix > 32) {
                print "N/A";
                exit;
            }
            
            # 1. –°—Ç—Ä–æ–∏–º –º–∞—Å–∫—É –±–∏—Ç–æ–≤—ã–º —Å–¥–≤–∏–≥–æ–º.
            # –ü—Ä–∏–º–µ—Ä –¥–ª—è /3:
            # i=0: mask = 0*2 + 1 = 1 (–≤ –±–∏—Ç–∞—Ö ...001)
            # i=1: mask = 1*2 + 1 = 3 (–≤ –±–∏—Ç–∞—Ö ...011)
            # i=2: mask = 3*2 + 1 = 7 (–≤ –±–∏—Ç–∞—Ö ...111)
            mask = 0;
            for (i = 0; i < prefix; i++) {
                mask = mask * 2 + 1;
            }
            # –°–¥–≤–∏–≥–∞–µ–º –≤–ª–µ–≤–æ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ä–∞–∑—ã (–¥–æ 32 –±–∏—Ç), –∑–∞–ø–æ–ª–Ω—è—è –Ω—É–ª—è–º–∏.
            for (i = prefix; i < 32; i++) {
                mask = mask * 2;
            }
            
            # 2. –†–∞–∑–±–∏–≤–∞–µ–º –æ–≥—Ä–æ–º–Ω–æ–µ —á–∏—Å–ª–æ –Ω–∞ 4 –æ–∫—Ç–µ—Ç–∞ (–±–∞–π—Ç–∞).
            # –î–µ–ª–∏–º –Ω–∞ "–≤–µ—Å–∞" –±–∞–π—Ç–æ–≤ (2^24, 2^16, 2^8) –∏ –±–µ—Ä–µ–º –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç 256.
            octet1 = int(mask / 16777216) % 256;
            octet2 = int(mask / 65536) % 256;
            octet3 = int(mask / 256) % 256;
            octet4 = mask % 256;
            
            printf "%d.%d.%d.%d", octet1, octet2, octet3, octet4;
        }')
    else
        subnet_mask="N/A"
    fi

    

    # Gateway (–®–ª—é–∑)
    default_gateway=$(ip route 2>/dev/null | awk '/default/ {print $3; exit}')
    [[ -z "$default_gateway" ]] && default_gateway="N/A"

    # RAM (–ü–∞–º—è—Ç—å)
    local ram_total_gb ram_used_gb ram_free_gb
    if command -v free &>/dev/null; then
        # < <(...) ‚Äî Process Substitution (–ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞).
        # –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ—ë –≤—ã–≤–æ–¥ –≤ read, –ù–ï —Å–æ–∑–¥–∞–≤–∞—è –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å (subshell).
        # –ï—Å–ª–∏ –±—ã –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø–∞–π–ø |, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ram_* —É–º–µ—Ä–ª–∏ –±—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏.
        read -r ram_total_gb ram_used_gb ram_free_gb < <(
            LC_ALL=C free -b | awk '/Mem:/ {
                # –î–µ–ª–∏–º –Ω–∞ 1024 —Ç—Ä–∏ —Ä–∞–∑–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ì–∏–≥–∞–±–∞–π—Ç—ã (Byte -> KB -> MB -> GB)
                total = $2 / 1024 / 1024 / 1024;
                used  = $3 / 1024 / 1024 / 1024;
                free_m = $4 / 1024 / 1024 / 1024;
                printf "%.3f %.3f %.3f", total, used, free_m
            }'
        )
    else
        ram_total_gb="N/A"; ram_used_gb="N/A"; ram_free_gb="N/A"
    fi

    # Disk (–î–∏—Å–∫)
    local root_total_mb root_used_mb root_free_mb
    if command -v df &>/dev/null; then
        read -r root_total_mb root_used_mb root_free_mb < <(
            # df -B1: –≤—ã–≤–æ–¥ –≤ –±–∞–π—Ç–∞—Ö –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏.
            df -B1 / 2>/dev/null | awk 'NR==2 {
                # –î–µ–ª–∏–º –Ω–∞ 1024 –¥–≤–∞ —Ä–∞–∑–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ú–µ–≥–∞–±–∞–π—Ç—ã.
                total = $2/1024/1024;
                used = $3/1024/1024;
                free = $4/1024/1024;
                printf "%.2f %.2f %.2f", total, used, free
            }'
        )
    else
        root_total_mb="N/A"; root_used_mb="N/A"; root_free_mb="N/A"
    fi

    # --- –í–´–í–û–î –†–ï–ó–£–õ–¨–¢–ê–¢–ê ---
    # –ü–µ—á–∞—Ç–∞–µ–º —Å—Ç—Ä–æ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ ${name_style} –∏ ${value_style}.
    echo -e "${name_style}HOSTNAME${reset} = ${value_style}$node_name${reset}"
    echo -e "${name_style}TIMEZONE${reset} = ${value_style}$tz_name UTC $tz_offset${reset}"
    echo -e "${name_style}USER${reset} = ${value_style}$active_user${reset}"
    echo -e "${name_style}OS${reset} = ${value_style}$os_release${reset}"
    echo -e "${name_style}DATE${reset} = ${value_style}$current_moment${reset}"
    echo -e "${name_style}UPTIME${reset} = ${value_style}$uptime_human${reset}"
    echo -e "${name_style}UPTIME_SEC${reset} = ${value_style}${uptime_seconds} seconds${reset}"
    echo -e "${name_style}IP${reset} = ${value_style}$machine_ip${reset}"
    echo -e "${name_style}MASK${reset} = ${value_style}$subnet_mask${reset}"
    echo -e "${name_style}GATEWAY${reset} = ${value_style}$default_gateway${reset}"
    echo -e "${name_style}RAM_TOTAL${reset} = ${value_style}${ram_total_gb} GB${reset}"
    echo -e "${name_style}RAM_USED${reset} = ${value_style}${ram_used_gb} GB${reset}"
    echo -e "${name_style}RAM_FREE${reset} = ${value_style}${ram_free_gb} GB${reset}"
    echo -e "${name_style}SPACE_ROOT${reset} = ${value_style}${root_total_mb} MB${reset}"
    echo -e "${name_style}SPACE_ROOT_USED${reset} = ${value_style}${root_used_mb} MB${reset}"
    echo -e "${name_style}SPACE_ROOT_FREE${reset} = ${value_style}${root_free_mb} MB${reset}"
    
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –æ—à–∏–±–æ–∫
    set -e
}


# 6. === –ë–õ–û–ö: –û–¢–ß–ï–¢ –û –¶–í–ï–¢–û–í–û–ô –°–•–ï–ú–ï (print_color_scheme) ===
# –¶–µ–ª—å: –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–∞–∫–∏–µ —Ü–≤–µ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å, –∏ –æ—Ç–∫—É–¥–∞ –æ–Ω–∏ –≤–∑—è–ª–∏—Å—å (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ).

print_color_scheme() {
    # –ü—Ä–∏–Ω–∏–º–∞–µ–º –∫—É—á—É –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (—Ü–≤–µ—Ç–∞ –∏ —Ñ–ª–∞–≥–∏ –¥–µ—Ñ–æ–ª—Ç–∞)
    local col1_bg=$1
    local col1_fg=$2
    local col2_bg=$3
    local col2_fg=$4
    local col1_bg_is_default=$5
    local col1_fg_is_default=$6
    local col2_bg_is_default=$7
    local col2_fg_is_default=$8
    
    # –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª–∞–≥ is_default.
    # –ï—Å–ª–∏ 1 -> –ø–∏—à–µ–º "default".
    # get_color_name(...) -> –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º —Ü–∏—Ñ—Ä—É "2" –≤ —Å–ª–æ–≤–æ "red".
    
    if [[ $col1_bg_is_default -eq 1 ]]; then
        echo "Column 1 background = default ($(get_color_name $col1_bg))"
    else
        echo "Column 1 background = $col1_bg ($(get_color_name $col1_bg))"
    fi
    
    if [[ $col1_fg_is_default -eq 1 ]]; then
        echo "Column 1 font color = default ($(get_color_name $col1_fg))"
    else
        echo "Column 1 font color = $col1_fg ($(get_color_name $col1_fg))"
    fi
    
    if [[ $col2_bg_is_default -eq 1 ]]; then
        echo "Column 2 background = default ($(get_color_name $col2_bg))"
    else
        echo "Column 2 background = $col2_bg ($(get_color_name $col2_bg))"
    fi
    
    if [[ $col2_fg_is_default -eq 1 ]]; then
        echo "Column 2 font color = default ($(get_color_name $col2_fg))"
    else
        echo "Column 2 font color = $col2_fg ($(get_color_name $col2_fg))"
    fi
}


# 7. === –ë–õ–û–ö: –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø (MAIN) ===
# –¶–µ–ª—å: –û—Ä–∫–µ—Å—Ç—Ä–æ–≤–∫–∞. –í—ã–∑–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥, –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∫–∞–∑–∞—Ç—å –æ—Ç—á–µ—Ç.

main() {
    # 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ ip, awk –∏ –ø—Ä–æ—á–∏–µ.
    check_dependencies
    
    # 2. –ó–ê–ì–†–£–ó–ö–ê –ö–û–ù–§–ò–ì–ê. (–°–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è)
    # < <(load_config) ‚Äî –ú—ã –∑–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é load_config. –û–Ω–∞ –≤ –∫–æ–Ω—Ü–µ –¥–µ–ª–∞–µ—Ç echo "—Ü–∏—Ñ—Ä–∞ —Ü–∏—Ñ—Ä–∞ —Ü–∏—Ñ—Ä–∞...".
    # –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ "–≤—ã–ª–µ—Ç–∞–µ—Ç" –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤–æ –≤—Ö–æ–¥ –∫–æ–º–∞–Ω–¥–µ read.
    # read -r var1 var2 ... ‚Äî –ª–æ–≤–∏—Ç —ç—Ç–∏ —Ü–∏—Ñ—Ä—ã –∏ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∏—Ö –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º col1_bg, col1_fg –∏ —Ç.–¥.
    read -r col1_bg col1_fg col2_bg col2_fg col1_bg_is_default col1_fg_is_default col2_bg_is_default col2_fg_is_default < <(load_config)
    # –û–ø—Ü–∏—è -r –≤ –∫–æ–º–∞–Ω–¥–µ read —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ raw (—Å—ã—Ä–æ–π). –û–Ω–∞ –ø—Ä–∏–∫–∞–∑—ã–≤–∞–µ—Ç Bash –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª, –Ω–µ –ø—ã—Ç–∞—è—Å—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–µ —Å–ª—ç—à–∏ (\) –∫–∞–∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã.
    
    # 3. –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö.
    echo -e "\n=== –°–ò–°–¢–ï–ú–ù–ê–Ø –°–í–û–î–ö–ê ==="
    # –ü–µ—Ä–µ–¥–∞–µ–º —Ü–≤–µ—Ç–∞ (—Ü–∏—Ñ—Ä—ã 1-6) –≤ —Ñ—É–Ω–∫—Ü–∏—é —Å–±–æ—Ä–∞ —Ñ–∞–∫—Ç–æ–≤
    gather_system_facts "$col1_bg" "$col1_fg" "$col2_bg" "$col2_fg"
    echo "======================="
    # –§—É–Ω–∫—Ü–∏—è gather_system_facts –¥–µ–ª–∞–µ—Ç –¥–≤–µ –≤–µ—â–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
        # 1. –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ (–≤—ã—á–∏—Å–ª—è–µ—Ç IP, RAM, Uptime).
        # 2. –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É –≤—ã–≤–æ–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤—ã—Ö –∫–æ–¥–æ–≤.

    
    echo ""
    # 4. –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫–∏–µ —Ü–≤–µ—Ç–∞ –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.
    print_color_scheme "$col1_bg" "$col1_fg" "$col2_bg" "$col2_fg" "$col1_bg_is_default" "$col1_fg_is_default" "$col2_bg_is_default" "$col2_fg_is_default"









–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Äî —ç—Ç–æ –ø–æ–ª–Ω—ã–π ¬´–ø–∞—Å–ø–æ—Ä—Ç¬ª —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã —Ç–≤–æ–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞. –ß—Ç–æ–±—ã –±—ã–ª–æ –ø—Ä–æ—â–µ, –¥–∞–≤–∞–π —Ä–∞–∑–¥–µ–ª–∏–º –∏—Ö –Ω–∞ –¥–≤–µ –≥—Ä—É–ø–ø—ã: **¬´–ß—Ç–æ –∑–∞ —Ü–≤–µ—Ç?¬ª** –∏ **¬´–û—Ç–∫—É–¥–∞ –æ–Ω –≤–∑—è–ª—Å—è?¬ª**.


# ### 1. –ì—Ä—É–ø–ø–∞ ¬´–¶–≤–µ—Ç–∞¬ª (–ü–µ—Ä–≤—ã–µ —á–µ—Ç—ã—Ä–µ)

# –≠—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –æ—Ç **1 –¥–æ 6**, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ —Ç–∞–±–ª–∏—Ü—ã.

# | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç | –ß—Ç–æ –≤ –Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è |
# | --- | --- | --- |
# | **`$col1_bg`** | –§–æ–Ω –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ | –ö–æ–¥ —Ü–≤–µ—Ç–∞ (–Ω–∞–ø—Ä., 6 ‚Äî —á–µ—Ä–Ω—ã–π) |
# | **`$col1_fg`** | –®—Ä–∏—Ñ—Ç –ª–µ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ | –ö–æ–¥ —Ü–≤–µ—Ç–∞ (–Ω–∞–ø—Ä., 1 ‚Äî –±–µ–ª—ã–π) |
# | **`$col2_bg`** | –§–æ–Ω –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ | –ö–æ–¥ —Ü–≤–µ—Ç–∞ (–Ω–∞–ø—Ä., 2 ‚Äî –∫—Ä–∞—Å–Ω—ã–π) |
# | **`$col2_fg`** | –®—Ä–∏—Ñ—Ç –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ | –ö–æ–¥ —Ü–≤–µ—Ç–∞ (–Ω–∞–ø—Ä., 4 ‚Äî —Å–∏–Ω–∏–π) |

# ---

# ### 2. –ì—Ä—É–ø–ø–∞ ¬´–§–ª–∞–≥–∏¬ª (–ü–æ—Å–ª–µ–¥–Ω–∏–µ —á–µ—Ç—ã—Ä–µ)

# –≠—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∫–∏ (0 –∏–ª–∏ 1), –∫–æ—Ç–æ—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç –ø–æ—Å—Ç–∞–≤–∏–ª —Å–∞–º —Å–µ–±–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

# * **`1` (True)** ‚Äî –ó–Ω–∞—á–µ–Ω–∏–µ ¬´–¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ¬ª. –°–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞—à–µ–ª —ç—Ç–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ –∏ –≤–∑—è–ª –µ—ë –∏–∑ —Å–≤–æ–∏—Ö –∑–∞–ø–∞—Å–æ–≤.
# * **`0` (False)** ‚Äî –ó–Ω–∞—á–µ–Ω–∏–µ –≤–∑—è—Ç–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –ø—Ä–æ–ø–∏—Å–∞–ª —ç—Ç–æ—Ç —Ü–≤–µ—Ç.

# | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ó–Ω–∞—á–µ–Ω–∏–µ | –°–º—ã—Å–ª –≤ –æ—Ç—á–µ—Ç–µ |
# | --- | --- | --- |
# | **`$col1_bg_is_default`** | 0 –∏–ª–∏ 1 | –ï—Å–ª–∏ 1, –≤ –æ—Ç—á–µ—Ç–µ –Ω–∞–ø–∏—à–µ—Ç: `default (black)` |
# | **`$col1_fg_is_default`** | 0 –∏–ª–∏ 1 | –ï—Å–ª–∏ 0, –≤ –æ—Ç—á–µ—Ç–µ –Ω–∞–ø–∏—à–µ—Ç: `6 (black)` |
# | **`$col2_bg_is_default`** | 0 –∏–ª–∏ 1 | ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ |
# | **`$col2_fg_is_default`** | 0 –∏–ª–∏ 1 | ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏ |

# ---




}

# –ú–∞–≥–∏—á–µ—Å–∫–∏–π –ø–∏–Ω–æ–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞.
# "$@" –ø–µ—Ä–µ–¥–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å) –≤ —Ñ—É–Ω–∫—Ü–∏—é main.
main "$@"