#!/usr/bin/env bash

# === –ë–õ–û–ö 1: –ù–ê–°–¢–†–û–ô–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò ===
set -euo pipefail
# set -euo pipefail ‚Äî "–†–µ–∂–∏–º —Å—Ç—Ä–æ–≥–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã".
# -e: –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Å–ø–æ—Ç–∫–Ω—É–ª—Å—è (–æ—à–∏–±–∫–∞), –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å—ë.
# -u: –ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, —Ä—É–≥–∞–µ–º—Å—è.
# -o pipefail: –ï—Å–ª–∏ –≤ —Ü–µ–ø–æ—á–∫–µ –∫–æ–º–∞–Ω–¥ –æ–¥–Ω–∞ —Å–ª–æ–º–∞–ª–∞—Å—å, —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å –≤—Å—ë.


# === –ë–õ–û–ö 2: –ù–ê–í–ò–ì–ê–¶–ò–Ø ===
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# SCRIPT_DIR ‚Äî –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ö—Ä–∞–Ω–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ, –≥–¥–µ –ª–µ–∂–∏—Ç —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç.
# –ó–ê–ß–ï–ú: –ß—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –Ω–∞–π—Ç–∏ —Ñ–∞–π–ª—ã colors.sh –∏ –¥—Ä—É–≥–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏–º —Å–∫—Ä–∏–ø—Ç –∏–∑ –¥—Ä—É–≥–æ–π –ø–∞–ø–∫–∏.


# === –ë–õ–û–ö 3: –ò–ú–ü–û–†–¢ –ú–û–î–£–õ–ï–ô (–°–ë–û–† –ö–û–ú–ê–ù–î–´) ===
source "$SCRIPT_DIR/colors.sh"
source "$SCRIPT_DIR/validation.sh"
source "$SCRIPT_DIR/utils.sh"
source "$SCRIPT_DIR/collector.sh"
# source ‚Äî –ö–æ–º–∞–Ω–¥–∞ "–í—Å—Ç–∞–≤—å –∫–æ–¥ –æ—Ç—Ç—É–¥–∞ —Å—é–¥–∞".
# –¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏–∏ get_color, validate_parameters –∏ –¥—Ä—É–≥–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä—è–º–æ –∑–¥–µ—Å—å.


# === –ë–õ–û–ö 4: –õ–û–í–£–®–ö–ê (TRAP) ===
trap 'echo -e "\n\n–ü—Ä–µ—Ä–≤–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º."; exit 130' INT TERM
# trap ‚Äî "–ö–∞–ø–∫–∞–Ω". –û–Ω –∂–¥–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ INT (Ctrl+C) –∏–ª–∏ TERM (kill).
# –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–º–µ—Ç Ctrl+C, —Å–∫—Ä–∏–ø—Ç –≤–µ–∂–ª–∏–≤–æ –ø–æ–ø—Ä–æ—â–∞–µ—Ç—Å—è, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —É–º—Ä–µ—Ç –º–æ–ª—á–∞.


# === –ë–õ–û–ö 5: –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø ===
main() {
    # 1. –°–Ω–∞—á–∞–ª–∞ –∑–æ–≤–µ–º "–í—ã—à–∏–±–∞–ª—É" (–≤–∞–ª–∏–¥–∞—Ü–∏—é).
    # "$@" ‚Äî –ø–µ—Ä–µ–¥–∞–µ—Ç –í–°–ï –∞—Ä–≥—É–º–µ–Ω—Ç—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Å–∫—Ä–∏–ø—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: ./main.sh 1 2 3 4).
    validate_parameters "$@"

    # 2. –ó–æ–≤–µ–º "–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞" (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–∏–ª–∏—Ç).
    check_dependencies

    # 3. –í—ã–≤–æ–¥ –∫—Ä–∞—Å–∏–≤–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ (–ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç).
    # (–¢—É—Ç –ø—É—Å—Ç–æ –≤ –∫–æ–¥–µ, –Ω–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è echo –∑–∞–≥–æ–ª–æ–≤–∫–∞).

    # 4. –ó–æ–≤–µ–º "–°—ã—â–∏–∫–∞" —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.
    # –ú—ã –ø–µ—Ä–µ–¥–∞–µ–º –µ–º—É 4 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: $1, $2, $3, $4 (—Ü–≤–µ—Ç–∞).
    gather_system_facts "$1" "$2" "$3" "$4"
}

# –ó–ê–ü–£–°–ö
main "$@"













# ---

# üìö –°–û–î–ï–†–ñ–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê

1. **`main.sh`** ‚Äî üß† **–ú–æ–∑–≥**. –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ.
2. **`colors.sh`** ‚Äî üé® **–•—É–¥–æ–∂–Ω–∏–∫**. –ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ü–∏—Ñ—Ä—ã (1-6) –≤ –ø–æ–Ω—è—Ç–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—É —Ü–≤–µ—Ç–æ–≤—ã–µ –∫–æ–¥—ã.
3. **`validation.sh`** ‚Äî üõ°Ô∏è **–§–µ–π—Å–∫–æ–Ω—Ç—Ä–æ–ª—å**. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ —Ü–∏—Ñ—Ä—ã –≤–≤–µ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
4. **`utils.sh`** ‚Äî üõ† **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å—â–∏–∫**. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –Ω—É–∂–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.
5. **`collector.sh`** ‚Äî üïµÔ∏è **–°—ã—â–∏–∫**. –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–µ—Ç –∏—Ö –∏ –≤—ã–≤–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω.

---

